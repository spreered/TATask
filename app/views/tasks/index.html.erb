<h1><%=t('views.tasks_banner')%></h1>
<%= search_form_for @q do |f| %>
  <%= f.input :title_cont, label: t('views.tasks.title') %>
  <%= f.input :state_eq, as: :select,label: t('views.tasks.state_t'), collection: Task.states.keys.map {|state| [Task.states[state], t("views.tasks.state.#{state}")]}, label_method: :second, value_method: :first %>
  <%= f.submit %>
<% end %>

<%= link_to  t('views.new_task'), new_task_path %>
<table border="1" style="border-collapse: collapse;">
  <thead>
    <tr>
      <td><%=created_sort%></td>
      <td><%=deadline_sort%></td>
      <td><%=t('views.tasks.title')%></td>
      <td><%=priority_sort%></td>
      <td><%=t('views.tasks.state_t')%></td>
      <td>

    </tr>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
    <tr>
      <td><%=I18n.l( task.created_at, format: :short)%></td>
      <td><%=I18n.l( task.deadline, format: :short) if task.deadline.present?%></td>
      <td><%=link_to task.title, task_path(task) %></td>
      <td><%=t("views.tasks.priority.#{task.priority}") %></td>
      <td><%= t("views.tasks.state.#{task.state}")%></td>
      <td><%= link_to  t('views.tasks.edit'), edit_task_path(task) %> <%=button_to 'x', task_path(task),data: {:confirm => 'Are you sure?'}, method: :delete%></td>

    </tr>
    <%end%>
  </tbody> 
</table>

<%= paginate @tasks %>